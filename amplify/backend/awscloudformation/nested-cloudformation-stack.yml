{
  'AWSTemplateFormatVersion': '2010-09-09',
  'Description': 'Root stack for the Amplify AWS CloudFormation provider',
  'Parameters':
    {
      'DeploymentBucketName':
        {
          'Description': 'Name of the common deployment bucket provided by the parent stack',
          'Type': 'String',
          'Default': 'DeploymentBucket',
        },
      'AuthRoleName': { 'Type': 'String', 'Default': 'AuthRoleName' },
      'UnauthRoleName': { 'Type': 'String', 'Default': 'UnauthRoleName' },
    },
  'Resources':
    {
      'DeploymentBucket':
        {
          'Type': 'AWS::S3::Bucket',
          'DeletionPolicy': 'Retain',
          'Properties': { 'BucketName': { 'Ref': 'DeploymentBucketName' } },
        },
      'AuthRole':
        {
          'Type': 'AWS::IAM::Role',
          'Properties':
            {
              'RoleName': { 'Ref': 'AuthRoleName' },
              'AssumeRolePolicyDocument':
                {
                  'Version': '2012-10-17',
                  'Statement':
                    [
                      {
                        'Sid': '',
                        'Effect': 'Allow',
                        'Principal':
                          { 'Federated': 'cognito-identity.amazonaws.com' },
                        'Action': 'sts:AssumeRoleWithWebIdentity',
                        'Condition':
                          {
                            'ForAnyValue:StringLike':
                              {
                                'cognito-identity.amazonaws.com:amr': 'authenticated',
                              },
                          },
                      },
                    ],
                },
            },
        },
      'UnauthRole':
        {
          'Type': 'AWS::IAM::Role',
          'Properties':
            {
              'RoleName': { 'Ref': 'UnauthRoleName' },
              'AssumeRolePolicyDocument':
                {
                  'Version': '2012-10-17',
                  'Statement':
                    [
                      {
                        'Sid': '',
                        'Effect': 'Allow',
                        'Principal':
                          { 'Federated': 'cognito-identity.amazonaws.com' },
                        'Action': 'sts:AssumeRoleWithWebIdentity',
                        'Condition':
                          {
                            'ForAnyValue:StringLike':
                              {
                                'cognito-identity.amazonaws.com:amr': 'unauthenticated',
                              },
                          },
                      },
                    ],
                },
            },
        },
      'hostingS3AndCloudFront':
        {
          'Type': 'AWS::CloudFormation::Stack',
          'Properties':
            {
              'TemplateURL': 'https://s3.amazonaws.com/a2018-20181126173744-deployment/amplify-cfn-templates/hosting/template.json',
              'Parameters': {},
            },
        },
      'authcognito105252b6':
        {
          'Type': 'AWS::CloudFormation::Stack',
          'Properties':
            {
              'TemplateURL': 'https://s3.amazonaws.com/a2018-20181126173744-deployment/amplify-cfn-templates/auth/cognito105252b6-cloudformation-template.yml',
              'Parameters':
                {
                  'identityPoolName': 'be more identity pool',
                  'allowUnauthenticatedIdentities': false,
                  'thirdPartyAuth': false,
                  'lambdaLogPolicy': 'cognito105252b6_lambda_log_policy',
                  'openIdLambdaRoleName': 'cognito105252b6_openid_lambda_role',
                  'openIdRolePolicy': 'cognito105252b6_openid_pass_role_policy',
                  'openIdLambdaIAMPolicy': 'cognito105252b6_openid_lambda_iam_policy',
                  'openIdLogPolicy': 'cognito105252b6_openid_lambda_log_policy',
                  'userPoolName': 'be-more-user-pool',
                  'autoVerifiedAttributes': 'email',
                  'mfaConfiguration': 'OFF',
                  'mfaTypes': 'SMS Text Message',
                  'roleName': 'cognito105252b6_sns-role',
                  'roleExternalId': 'cognito105252b6_role_external_id',
                  'policyName': 'cognito105252b6-sns-policy',
                  'smsAuthenticationMessage': 'Your authentication code is {####}',
                  'smsVerificationMessage': 'Your verification code is {####}',
                  'emailVerificationSubject': 'Your verification code',
                  'emailVerificationMessage': 'Your verification code is {####}',
                  'defaultPasswordPolicy': false,
                  'passwordPolicyMinLength': 8,
                  'passwordPolicyCharacters': 'Requires Lowercase,Requires Uppercase,Requires Numbers,Requires Symbols',
                  'requiredAttributes': 'email',
                  'userpoolClientName': 'cognito105252b6_app_client',
                  'userpoolClientGenerateSecret': true,
                  'userpoolClientRefreshTokenValidity': 30,
                  'userpoolClientReadAttributes': 'email',
                  'mfaLambdaRole': 'cognito105252b6_totp_lambda_role',
                  'mfaLambdaLogPolicy': 'cognito105252b6_totp_lambda_log_policy',
                  'mfaPassRolePolicy': 'cognito105252b6_totp_pass_role_policy',
                  'mfaLambdaIAMPolicy': 'cognito105252b6_totp_lambda_iam_policy',
                  'userpoolClientLambdaRole': 'cognito105252b6_userpoolclient_lambda_role',
                  'userpoolClientLogPolicy': 'cognito105252b6_userpoolclient_lambda_log_policy',
                  'userpoolClientLambdaPolicy': 'cognito105252b6_userpoolclient_lambda_iam_policy',
                  'userpoolClientSetAttributes': false,
                  'useDefault': 'default',
                  'unAuthRoleName': 'a2018-20181126173744-unauthRole',
                  'authRoleName': 'a2018-20181126173744-authRole',
                  'unAuthRoleArn': 'arn:aws:iam::231960707961:role/a2018-20181126173744-unauthRole',
                  'authRoleArn': 'arn:aws:iam::231960707961:role/a2018-20181126173744-authRole',
                  'resourceName': 'cognito105252b6',
                  'authSelections': 'identityPoolAndUserPool',
                },
            },
        },
    },
  'Outputs':
    {
      'Region':
        {
          'Description': 'CloudFormation provider root stack Region',
          'Value': { 'Ref': 'AWS::Region' },
          'Export': { 'Name': { 'Fn::Sub': '${AWS::StackName}-Region' } },
        },
      'StackName':
        {
          'Description': 'CloudFormation provider root stack ID',
          'Value': { 'Ref': 'AWS::StackName' },
          'Export': { 'Name': { 'Fn::Sub': '${AWS::StackName}-StackName' } },
        },
      'StackId':
        {
          'Description': 'CloudFormation provider root stack name',
          'Value': { 'Ref': 'AWS::StackId' },
          'Export': { 'Name': { 'Fn::Sub': '${AWS::StackName}-StackId' } },
        },
      'DeploymentBucketName':
        {
          'Description': 'CloudFormation provider root stack deployment bucket name',
          'Value': { 'Ref': 'DeploymentBucketName' },
          'Export':
            { 'Name': { 'Fn::Sub': '${AWS::StackName}-DeploymentBucketName' } },
        },
      'AuthRoleArn': { 'Value': { 'Fn::GetAtt': ['AuthRole', 'Arn'] } },
      'UnauthRoleArn': { 'Value': { 'Fn::GetAtt': ['UnauthRole', 'Arn'] } },
      'AuthRoleName': { 'Value': { 'Ref': 'AuthRole' } },
      'UnauthRoleName': { 'Value': { 'Ref': 'UnauthRole' } },
    },
}
